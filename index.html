<!doctype html>
<html lang="ko" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë¶ë§ˆí¬ë³´ë‹¤ ë¹ ë¥¸, ë‚˜ë§Œì˜ ì‹œì‘ í™”ë©´</title>

  <meta name="theme-color" content="#ffffff" />
  <link rel="icon" type="image/svg+xml"
        href='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="128" height="128"%3E%3Crect width="128" height="128" rx="28" fill="%23ffffff"/%3E%3Cpath d="M36 40h56v10H36zM36 59h40v10H36zM36 78h56v10H36z" fill="%23111827"/%3E%3C/svg%3E' />

  <style>
    :root{
      --bg:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --card:#ffffff;
      --chip:#f3f4f6;
      --hover:#f9fafb;
      --shadow: 0 10px 30px rgba(17,24,39,.06);

      --naver:#03C75A;
      --googleBlue:#4285F4;
      --googleRed:#EA4335;
      --googleYellow:#FBBC05;
      --googleGreen:#34A853;

      --gold:#f59e0b;
      --danger:#ef4444;

      --radius:16px;
      --max:1200px;
    }
    html[data-theme="dark"]{
      --bg:#0b0f19;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --line:#1f2937;
      --card:#0f1627;
      --chip:#111b30;
      --hover:#121c31;
      --shadow: 0 14px 34px rgba(0,0,0,.35);
      --gold:#fbbf24;
      --danger:#f87171;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit}

    .wrap{max-width:var(--max); margin:0 auto; padding:22px 18px 48px;}
    .topbar{
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px;
      margin-bottom:14px;
    }
    .brand h1{
      margin:0;
      font-size:28px;
      letter-spacing:-0.02em;
      line-height:1.15;
    }
    .brand p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }

    .rightTools{display:flex; align-items:center; gap:10px; flex-wrap:wrap; justify-content:flex-end;}
    .toggle{
      display:flex; align-items:center; gap:8px;
      border:1px solid var(--line);
      background:var(--card);
      padding:8px 10px;
      border-radius:999px;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
      user-select:none;
    }
    .dot{width:10px;height:10px;border-radius:999px;background:var(--text); opacity:.85}
    .btn{
      border:1px solid var(--line);
      background:var(--card);
      padding:9px 11px;
      border-radius:12px;
      font-weight:900;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{background:var(--hover);}

    /* quick tabs (screenshot ëŠë‚Œ) */
    .tabs{
      display:flex; gap:10px; flex-wrap:wrap;
      border-bottom:1px solid var(--line);
      padding-bottom:10px;
      margin-bottom:12px;
    }
    .tab{
      padding:10px 10px;
      font-size:13px;
      font-weight:900;
      color:var(--muted);
      border-bottom:2px solid transparent;
      cursor:pointer;
      user-select:none;
    }
    .tab.active{color:var(--text); border-bottom-color:var(--text);}

    /* layout */
    .layout{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:16px;
      align-items:start;
    }

    /* search row */
    .searchRow{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:stretch;
    }
    .search{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:14px;
      padding:10px 12px;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow:var(--shadow);
      min-width:0;
    }
    .search .icon{
      width:34px;height:34px;border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      font-weight:950; flex:0 0 auto;
      border:1px solid var(--line);
      background:var(--chip);
    }
    .search input{
      width:100%;
      border:0; outline:none;
      background:transparent;
      color:var(--text);
      font-size:14px;
      font-weight:800;
      min-width:0;
    }
    .search .go{
      padding:8px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:var(--chip);
      font-weight:950;
      font-size:12px;
      cursor:pointer;
      user-select:none;
      flex:0 0 auto;
    }
    .search .go:hover{background:var(--hover);}

    .search.naver{border-color: color-mix(in srgb, var(--naver) 35%, var(--line));}
    .search.naver .icon{
      border-color: color-mix(in srgb, var(--naver) 35%, var(--line));
      background: color-mix(in srgb, var(--naver) 16%, var(--chip));
      color: color-mix(in srgb, var(--naver) 78%, var(--text));
    }
    .search.naver .go{
      border-color: color-mix(in srgb, var(--naver) 35%, var(--line));
      background: color-mix(in srgb, var(--naver) 10%, var(--chip));
    }

    .search.google{position:relative;}
    .search.google::before{
      content:"";
      position:absolute;
      inset:-1px;
      border-radius:14px;
      padding:1px;
      background: conic-gradient(from 200deg,
        var(--googleBlue), var(--googleRed), var(--googleYellow), var(--googleGreen), var(--googleBlue));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      pointer-events:none;
      opacity:.55;
    }
    .search.google .icon{
      border-color: color-mix(in srgb, var(--googleBlue) 30%, var(--line));
      background: color-mix(in srgb, var(--googleBlue) 12%, var(--chip));
      color: color-mix(in srgb, var(--googleBlue) 75%, var(--text));
    }

    /* trend line (screenshotì²˜ëŸ¼ í•œ ì¤„) */
    .trendLine{
      margin-top:10px;
      border:1px solid var(--line);
      background:var(--card);
      border-radius:14px;
      padding:10px 12px;
      box-shadow:var(--shadow);
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .trendBadge{
      font-weight:950;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background:var(--chip);
      border:1px solid var(--line);
      flex:0 0 auto;
    }
    .trendText{
      min-width:0;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      font-size:13px;
      color:var(--muted);
      font-weight:850;
    }
    .trendText b{color:var(--text); font-weight:950;}
    .trendHint{
      margin-left:auto;
      color:var(--muted);
      font-size:11px;
      font-weight:850;
      white-space:nowrap;
      flex:0 0 auto;
    }

    /* categories */
    .cats{
      margin-top:12px;
      display:flex; gap:8px; flex-wrap:wrap;
    }
    .chip{
      border:1px solid var(--line);
      background:var(--chip);
      border-radius:999px;
      padding:8px 12px;
      font-weight:950;
      font-size:13px;
      cursor:pointer;
      user-select:none;
      display:flex; align-items:center; gap:8px;
    }
    .chip:hover{background:var(--hover);}
    .chip.active{
      background:var(--text);
      color:var(--bg);
      border-color:var(--text);
    }
    .count{opacity:.75; font-size:12px; font-weight:950;}

    /* grid cards */
    .grid{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap:12px;
    }
    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:var(--radius);
      padding:14px;
      box-shadow: 0 0 0 rgba(0,0,0,0);
      display:grid;
      grid-template-columns: 34px 1fr 34px;
      align-items:center;
      gap:10px;
      text-decoration:none;
      min-height:78px;
      min-width:0;
      transition: transform .12s ease, background .12s ease, box-shadow .12s ease;
    }
    .card:hover{background:var(--hover); transform:translateY(-1px); box-shadow: 0 14px 28px rgba(17,24,39,.10);}
    .badge{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--line);
      background:var(--chip);
      display:flex; align-items:center; justify-content:center;
      font-weight:950;
      font-size:13px;
      user-select:none;
      overflow:hidden;
    }
    .badge img{width:18px;height:18px; object-fit:contain; display:block;}
    .meta{min-width:0; display:flex; flex-direction:column; gap:6px;}
    .title{font-weight:980; letter-spacing:-0.01em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .sub{font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .star{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--line);
      background:var(--chip);
      display:flex; align-items:center; justify-content:center;
      cursor:pointer;
      user-select:none;
      font-weight:980;
      color:var(--muted);
    }
    .star:hover{background:var(--hover);}
    .star.on{color:var(--gold); border-color: color-mix(in srgb, var(--gold) 35%, var(--line));}

    /* sidebar widgets */
    .side{display:flex; flex-direction:column; gap:12px;}
    .panel{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:16px;
      padding:12px;
      box-shadow:var(--shadow);
    }
    .panelTop{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px;}
    .panelTitle{font-weight:980; font-size:13px; display:flex; align-items:center; gap:8px;}
    .panelSub{color:var(--muted); font-size:12px; font-weight:850; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}

    .wxRow{display:flex; align-items:center; gap:10px;}
    .wxIcon{
      width:42px;height:42px;border-radius:14px;
      border:1px solid var(--line);
      background:var(--chip);
      display:flex; align-items:center; justify-content:center;
      font-weight:980;
      flex:0 0 auto;
    }
    .wxTemp{font-size:26px; font-weight:980; letter-spacing:-0.02em; font-variant-numeric:tabular-nums;}
    .wxDesc{color:var(--muted); font-size:12px; font-weight:850; line-height:1.4;}

    .clock{font-weight:980; font-size:12px; font-variant-numeric:tabular-nums; white-space:nowrap;}

    .calGrid{display:grid; grid-template-columns:repeat(7, 1fr); gap:6px;}
    .calHead{color:var(--muted); font-size:10px; font-weight:950; text-align:center; padding:2px 0;}
    .calCell{
      border:1px solid var(--line);
      background:var(--bg);
      border-radius:10px;
      height:28px;
      display:flex; align-items:center; justify-content:center;
      font-size:11px; font-weight:900;
      position:relative;
      font-variant-numeric:tabular-nums;
    }
    .calCell.muted{opacity:.35}
    .calCell.today::after{
      content:"";
      position:absolute;
      width:18px;height:18px;
      border-radius:999px;
      border:2px solid color-mix(in srgb, var(--naver) 55%, var(--text));
      pointer-events:none;
    }

    /* favorites (sidebar) */
    .favList{display:flex; flex-direction:column; gap:8px;}
    .favItem{
      border:1px solid var(--line);
      background:var(--bg);
      border-radius:14px;
      padding:10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      min-width:0;
    }
    .favLeft{min-width:0; display:flex; flex-direction:column; gap:4px;}
    .favA{
      font-weight:900;
      text-decoration:none;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .favB{color:var(--muted); font-size:11px; font-weight:850; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
    .xbtn{
      width:30px;height:30px;border-radius:12px;
      border:1px solid var(--line);
      background:var(--chip);
      cursor:pointer;
      font-weight:980;
      color:var(--danger);
      user-select:none;
      flex:0 0 auto;
      display:flex; align-items:center; justify-content:center;
    }
    .xbtn:hover{background:var(--hover);}

    @media (max-width: 980px){
      .layout{grid-template-columns:1fr;}
      .searchRow{grid-template-columns:1fr;}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <h1>ë¶ë§ˆí¬ë³´ë‹¤ ë¹ ë¥¸, ë‚˜ë§Œì˜ ì‹œì‘ í™”ë©´</h1>
        <p>ë¶„ì‚°ëœ ë¶ë§ˆí¬Â·ëª¨ìŒì„ í•˜ë‚˜ë¡œ ì •ë¦¬í•©ë‹ˆë‹¤. (ë¬´íšŒì› Â· ë¸Œë¼ìš°ì € ì €ì¥) â€¢ ë§í¬ í´ë¦­ì€ ì™¸ë¶€ ì„œë¹„ìŠ¤ë¡œ ì´ë™í•©ë‹ˆë‹¤. â€¢ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘/ì €ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
      </div>

      <div class="rightTools">
        <button class="btn" id="exportBtn" type="button">ë‚´ë³´ë‚´ê¸°</button>
        <button class="btn" id="importBtn" type="button">ê°€ì ¸ì˜¤ê¸°</button>
        <button class="btn" id="wipeBtn" type="button">ê°œì¸í™” ì´ˆê¸°í™”</button>
        <div class="toggle" id="themeToggle" title="ë¸”ë™/í™”ì´íŠ¸ ì „í™˜">
          <span class="dot"></span>
          <span id="themeLabel">WHITE</span>
        </div>
      </div>
    </div>

    <div class="tabs" id="tabs">
      <div class="tab active" data-tab="main">ë‚´ì¼í•  ê²ƒ</div>
      <div class="tab" data-tab="daily">ì¼ì¼ ì¡°ê¸°ë¡</div>
      <div class="tab" data-tab="diary">ë‚´ì¼ì§€ê¸°</div>
      <div class="tab" data-tab="cafe">ì¹´í˜ì¡°ê¸°</div>
      <div class="tab" data-tab="game">ê²Œì´ë° ì¡°ê¸°ë¡</div>
      <div class="tab" data-tab="share">ê³µìœ  ëª©ë¡(ê³µìœ )</div>
      <div class="tab" data-tab="quick">ì¡°ê¸°ë¡</div>
    </div>

    <div class="layout">
      <!-- LEFT -->
      <div>
        <div class="searchRow">
          <div class="search naver" title="ë„¤ì´ë²„ ê²€ìƒ‰ (Enter)">
            <div class="icon">N</div>
            <input id="naverQ" placeholder="ë„¤ì´ë²„ ê²€ìƒ‰ (Enter)" autocomplete="off" />
            <button class="go" id="naverGo" type="button">ê²€ìƒ‰</button>
          </div>
          <div class="search google" title="êµ¬ê¸€ ê²€ìƒ‰ (Enter)">
            <div class="icon">G</div>
            <input id="googleQ" placeholder="êµ¬ê¸€ ê²€ìƒ‰ (Enter)" autocomplete="off" />
            <button class="go" id="googleGo" type="button">ê²€ìƒ‰</button>
          </div>
        </div>

        <div class="trendLine">
          <div class="trendBadge">íŠ¸ë Œë“œ</div>
          <div class="trendText" id="trendText">ë¡œë”© ì¤‘â€¦</div>
          <div class="trendHint" id="trendHint">5ì´ˆë§ˆë‹¤ ê°±ì‹ </div>
        </div>

        <div class="cats" id="cats"></div>
        <div class="grid" id="grid"></div>
      </div>

      <!-- RIGHT -->
      <div class="side">
        <div class="panel">
          <div class="panelTop">
            <div class="panelTitle">ë‚ ì”¨</div>
            <div class="panelSub" id="wxPlace">â€”</div>
          </div>
          <div class="wxRow">
            <div class="wxIcon" id="wxIcon">â˜</div>
            <div>
              <div class="wxTemp" id="wxTemp">--Â°</div>
              <div class="wxDesc" id="wxDesc">ë¡œë”© ì¤‘â€¦</div>
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panelTop">
            <div class="panelTitle" id="calTitle">ìº˜ë¦°ë”</div>
            <div class="clock" id="clock">--:--:--</div>
          </div>
          <div class="calGrid" id="calGrid"></div>
        </div>

        <div class="panel">
          <div class="panelTop">
            <div class="panelTitle">ì¦ê²¨ì°¾ê¸°(í˜„ì¬ ì¹´í…Œê³ ë¦¬)</div>
            <div class="panelSub" id="favScope">ì „ì²´</div>
          </div>
          <div class="favList" id="favList"></div>
          <div style="margin-top:8px; color:var(--muted); font-size:11px; font-weight:850; line-height:1.4;">
            ì¹´ë“œì˜ â­ë¥¼ ëˆ„ë¥´ë©´ í˜„ì¬ ì¹´í…Œê³ ë¦¬ ì¦ê²¨ì°¾ê¸°ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* =======================
   STORAGE
======================= */
const KEY_THEME = "dash_theme_v1";
const KEY_FAV = "dash_fav_v1";

/* =======================
   THEME
======================= */
const themeToggle = document.getElementById("themeToggle");
const themeLabel = document.getElementById("themeLabel");
function applyTheme(theme){
  document.documentElement.setAttribute("data-theme", theme);
  themeLabel.textContent = (theme === "dark") ? "BLACK" : "WHITE";
  const meta = document.querySelector('meta[name="theme-color"]');
  if(meta) meta.setAttribute("content", theme === "dark" ? "#0b0f19" : "#ffffff");
  localStorage.setItem(KEY_THEME, theme);
}
applyTheme(localStorage.getItem(KEY_THEME) === "dark" ? "dark" : "light");
themeToggle.addEventListener("click", ()=>{
  const now = document.documentElement.getAttribute("data-theme") || "light";
  applyTheme(now === "dark" ? "light" : "dark");
});

/* =======================
   TABS (UIë§Œ)
======================= */
document.getElementById("tabs").addEventListener("click", (e)=>{
  const t = e.target.closest(".tab");
  if(!t) return;
  document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
  t.classList.add("active");
});

/* =======================
   SEARCH
======================= */
const naverQ = document.getElementById("naverQ");
const googleQ = document.getElementById("googleQ");
document.getElementById("naverGo").addEventListener("click", ()=>doNaver());
document.getElementById("googleGo").addEventListener("click", ()=>doGoogle());
naverQ.addEventListener("keydown", (e)=>{ if(e.key==="Enter") doNaver(); });
googleQ.addEventListener("keydown", (e)=>{ if(e.key==="Enter") doGoogle(); });

function doNaver(){
  const q=(naverQ.value||"").trim();
  if(!q) return;
  window.open("https://search.naver.com/search.naver?query="+encodeURIComponent(q), "_blank", "noopener");
}
function doGoogle(){
  const q=(googleQ.value||"").trim();
  if(!q) return;
  window.open("https://www.google.com/search?q="+encodeURIComponent(q), "_blank", "noopener");
}

/* =======================
   DATA (ì¹´í…Œê³ ë¦¬ 10ê°œ, ê° 10ê°œ)
======================= */
const CAT = [
  {k:"all", name:"ì „ì²´"},
  {k:"community", name:"ì»¤ë®¤ë‹ˆí‹°"},
  {k:"work", name:"ì—…ë¬´"},
  {k:"video", name:"ë¹„ë””ì˜¤"},
  {k:"finance", name:"ê¸ˆìœµ"},
  {k:"ai", name:"AI"},
  {k:"dev", name:"ê°œë°œ/ë””ìì¸"},
  {k:"media", name:"ë¯¸ë””ì–´"},
  {k:"tools", name:"ë„êµ¬"},
  {k:"etc", name:"ê¸°íƒ€"},
];

const LINKS = [
  // ì»¤ë®¤ë‹ˆí‹°
  {cat:"community", title:"Blind", sub:"ì§ì¥ì¸ ì»¤ë®¤ë‹ˆí‹°", href:"https://www.blind.com", badge:"B"},
  {cat:"community", title:"DCInside", sub:"ë””ì‹œì¸ì‚¬ì´ë“œ", href:"https://www.dcinside.com", badge:"ã„·"},
  {cat:"community", title:"FMKOREA", sub:"ì»¤ë®¤ë‹ˆí‹°", href:"https://www.fmkorea.com", badge:"F"},
  {cat:"community", title:"Clien", sub:"ì»¤ë®¤ë‹ˆí‹°", href:"https://www.clien.net", badge:"C"},
  {cat:"community", title:"Ppomppu", sub:"ì»¤ë®¤ë‹ˆí‹°", href:"https://www.ppomppu.co.kr", badge:"P"},
  {cat:"community", title:"Inven", sub:"ê²Œì„ ì»¤ë®¤ë‹ˆí‹°", href:"https://www.inven.co.kr", badge:"I"},
  {cat:"community", title:"Ruliweb", sub:"ì»¤ë®¤ë‹ˆí‹°", href:"https://www.ruliweb.com", badge:"R"},
  {cat:"community", title:"Namu Wiki", sub:"ìœ„í‚¤", href:"https://namu.wiki", badge:"N"},
  {cat:"community", title:"Reddit", sub:"ê¸€ë¡œë²Œ", href:"https://www.reddit.com", badge:"R"},
  {cat:"community", title:"Quora", sub:"Q&A", href:"https://www.quora.com", badge:"Q"},

  // ì—…ë¬´
  {cat:"work", title:"Notion", sub:"ë¬¸ì„œ/ìœ„í‚¤", href:"https://www.notion.so", badge:"N"},
  {cat:"work", title:"Google Drive", sub:"íŒŒì¼", href:"https://drive.google.com", badge:"â–³"},
  {cat:"work", title:"Google Docs", sub:"ë¬¸ì„œ", href:"https://docs.google.com", badge:"D"},
  {cat:"work", title:"Google Sheets", sub:"ì‹œíŠ¸", href:"https://sheets.google.com", badge:"S"},
  {cat:"work", title:"Google Calendar", sub:"ìº˜ë¦°ë”", href:"https://calendar.google.com", badge:"C"},
  {cat:"work", title:"Gmail", sub:"ë©”ì¼", href:"https://mail.google.com", badge:"M"},
  {cat:"work", title:"Slack", sub:"ì—…ë¬´ ì±„íŒ…", href:"https://slack.com/signin", badge:"S"},
  {cat:"work", title:"Trello", sub:"ì¹¸ë°˜", href:"https://trello.com", badge:"T"},
  {cat:"work", title:"Canva", sub:"ë””ìì¸ í…œí”Œë¦¿", href:"https://www.canva.com", badge:"C"},
  {cat:"work", title:"Microsoft 365", sub:"ì˜¤í”¼ìŠ¤", href:"https://www.office.com", badge:"O"},

  // ë¹„ë””ì˜¤
  {cat:"video", title:"YouTube", sub:"ë™ì˜ìƒ", href:"https://www.youtube.com", badge:"â–¶"},
  {cat:"video", title:"Netflix", sub:"ìŠ¤íŠ¸ë¦¬ë°", href:"https://www.netflix.com", badge:"N"},
  {cat:"video", title:"TVING", sub:"êµ­ë‚´ OTT", href:"https://www.tving.com", badge:"T"},
  {cat:"video", title:"Wavve", sub:"êµ­ë‚´ OTT", href:"https://www.wavve.com", badge:"W"},
  {cat:"video", title:"Disney+", sub:"ìŠ¤íŠ¸ë¦¬ë°", href:"https://www.disneyplus.com", badge:"D"},
  {cat:"video", title:"Twitch", sub:"ë¼ì´ë¸Œ", href:"https://www.twitch.tv", badge:"T"},
  {cat:"video", title:"AfreecaTV", sub:"ë¼ì´ë¸Œ", href:"https://www.afreecatv.com", badge:"A"},
  {cat:"video", title:"Naver TV", sub:"ë¹„ë””ì˜¤", href:"https://tv.naver.com", badge:"N"},
  {cat:"video", title:"KakaoTV", sub:"ë¹„ë””ì˜¤", href:"https://tv.kakao.com", badge:"K"},
  {cat:"video", title:"Vimeo", sub:"ë¹„ë””ì˜¤", href:"https://vimeo.com", badge:"V"},

  // ê¸ˆìœµ
  {cat:"finance", title:"Naver Finance", sub:"êµ­ë‚´ ì‹œì„¸", href:"https://finance.naver.com", badge:"â‚©"},
  {cat:"finance", title:"TradingView", sub:"ì°¨íŠ¸", href:"https://www.tradingview.com", badge:"TV"},
  {cat:"finance", title:"Investing", sub:"ì‹œì¥ ë°ì´í„°", href:"https://www.investing.com", badge:"I"},
  {cat:"finance", title:"Google Finance", sub:"ì‹œì¥", href:"https://www.google.com/finance", badge:"G"},
  {cat:"finance", title:"CoinMarketCap", sub:"ì‹œì´", href:"https://coinmarketcap.com", badge:"C"},
  {cat:"finance", title:"CoinGecko", sub:"ë°ì´í„°", href:"https://www.coingecko.com", badge:"ğŸ¦"},
  {cat:"finance", title:"Bitget", sub:"ê±°ë˜ì†Œ", href:"https://www.bitget.com", badge:"B"},
  {cat:"finance", title:"Binance", sub:"ê±°ë˜ì†Œ", href:"https://www.binance.com", badge:"â—‡"},
  {cat:"finance", title:"Toss", sub:"ê¸ˆìœµ", href:"https://www.toss.im", badge:"T"},
  {cat:"finance", title:"KakaoBank", sub:"ì€í–‰", href:"https://www.kakaobank.com", badge:"K"},

  // AI
  {cat:"ai", title:"ChatGPT", sub:"ëŒ€í™”í˜• AI", href:"https://chat.openai.com", badge:"C"},
  {cat:"ai", title:"Claude", sub:"ëŒ€í™”í˜• AI", href:"https://claude.ai", badge:"C"},
  {cat:"ai", title:"Gemini", sub:"êµ¬ê¸€ AI", href:"https://gemini.google.com", badge:"G"},
  {cat:"ai", title:"Perplexity", sub:"AI ê²€ìƒ‰", href:"https://www.perplexity.ai", badge:"P"},
  {cat:"ai", title:"OpenAI Platform", sub:"API", href:"https://platform.openai.com", badge:"O"},
  {cat:"ai", title:"Hugging Face", sub:"ëª¨ë¸/ë°ì´í„°", href:"https://huggingface.co", badge:"ğŸ¤—"},
  {cat:"ai", title:"Midjourney", sub:"ì´ë¯¸ì§€", href:"https://www.midjourney.com", badge:"M"},
  {cat:"ai", title:"Recraft", sub:"ë””ìì¸", href:"https://recraft.ai", badge:"R"},
  {cat:"ai", title:"Runway", sub:"ì˜ìƒ AI", href:"https://runwayml.com", badge:"R"},
  {cat:"ai", title:"Cursor", sub:"AI ì—ë””í„°", href:"https://www.cursor.com", badge:"C"},

  // ê°œë°œ/ë””ìì¸
  {cat:"dev", title:"GitHub", sub:"ì½”ë“œ", href:"https://github.com", badge:"G"},
  {cat:"dev", title:"Vercel", sub:"ë°°í¬", href:"https://vercel.com", badge:"V"},
  {cat:"dev", title:"Netlify", sub:"ë°°í¬", href:"https://www.netlify.com", badge:"N"},
  {cat:"dev", title:"Figma", sub:"ë””ìì¸", href:"https://www.figma.com", badge:"F"},
  {cat:"dev", title:"Stack Overflow", sub:"Q&A", href:"https://stackoverflow.com", badge:"S"},
  {cat:"dev", title:"MDN", sub:"ì›¹ ë¬¸ì„œ", href:"https://developer.mozilla.org", badge:"M"},
  {cat:"dev", title:"CodePen", sub:"ì‹¤í—˜", href:"https://codepen.io", badge:"C"},
  {cat:"dev", title:"Postman", sub:"API", href:"https://www.postman.com", badge:"P"},
  {cat:"dev", title:"Cloudflare", sub:"CDN", href:"https://cloudflare.com", badge:"C"},
  {cat:"dev", title:"Supabase", sub:"DB/Auth", href:"https://supabase.com", badge:"S"},

  // ë¯¸ë””ì–´(ìŒì•…/ì›¹íˆ° ë“±)
  {cat:"media", title:"YouTube Music", sub:"ìŒì•…", href:"https://music.youtube.com", badge:"â™ª"},
  {cat:"media", title:"Spotify", sub:"ìŒì•…", href:"https://www.spotify.com", badge:"S"},
  {cat:"media", title:"Naver Webtoon", sub:"ì›¹íˆ°", href:"https://comic.naver.com", badge:"W"},
  {cat:"media", title:"Kakao Webtoon", sub:"ì›¹íˆ°", href:"https://webtoon.kakao.com", badge:"K"},
  {cat:"media", title:"Melon", sub:"ìŒì•…", href:"https://www.melon.com", badge:"M"},
  {cat:"media", title:"Genie", sub:"ìŒì•…", href:"https://www.genie.co.kr", badge:"G"},
  {cat:"media", title:"SoundCloud", sub:"ìŒì•…", href:"https://soundcloud.com", badge:"S"},
  {cat:"media", title:"Brunch", sub:"ê¸€/ì½˜í…ì¸ ", href:"https://brunch.co.kr", badge:"B"},
  {cat:"media", title:"Medium", sub:"ê¸€", href:"https://medium.com", badge:"M"},
  {cat:"media", title:"NAVER Blog", sub:"ë¸”ë¡œê·¸", href:"https://blog.naver.com", badge:"N"},

  // ë„êµ¬
  {cat:"tools", title:"Google Translate", sub:"ë²ˆì—­", href:"https://translate.google.com", badge:"T"},
  {cat:"tools", title:"DeepL", sub:"ë²ˆì—­", href:"https://www.deepl.com", badge:"D"},
  {cat:"tools", title:"remove.bg", sub:"ë°°ê²½ ì œê±°", href:"https://www.remove.bg", badge:"r"},
  {cat:"tools", title:"Speedtest", sub:"ì†ë„", href:"https://www.speedtest.net", badge:"S"},
  {cat:"tools", title:"Time & Date", sub:"ì‹œê°„", href:"https://www.timeanddate.com", badge:"T"},
  {cat:"tools", title:"Naver Map", sub:"ì§€ë„", href:"https://map.naver.com", badge:"N"},
  {cat:"tools", title:"Kakao Map", sub:"ì§€ë„", href:"https://map.kakao.com", badge:"K"},
  {cat:"tools", title:"Google Keep", sub:"ë©”ëª¨", href:"https://keep.google.com", badge:"K"},
  {cat:"tools", title:"Dropbox", sub:"íŒŒì¼", href:"https://www.dropbox.com", badge:"D"},
  {cat:"tools", title:"WeTransfer", sub:"íŒŒì¼ ì „ì†¡", href:"https://wetransfer.com", badge:"W"},

  // ê¸°íƒ€
  {cat:"etc", title:"Naver", sub:"í¬í„¸", href:"https://www.naver.com", badge:"N"},
  {cat:"etc", title:"Google", sub:"í¬í„¸", href:"https://www.google.com", badge:"G"},
  {cat:"etc", title:"Wikipedia", sub:"ë°±ê³¼", href:"https://www.wikipedia.org", badge:"W"},
  {cat:"etc", title:"Chat", sub:"ë©”ì‹ ì € ëª¨ìŒ", href:"https://web.telegram.org", badge:"T"},
  {cat:"etc", title:"News", sub:"êµ¬ê¸€ ë‰´ìŠ¤", href:"https://news.google.com", badge:"G"},
  {cat:"etc", title:"Naver News", sub:"ë„¤ì´ë²„ ë‰´ìŠ¤", href:"https://news.naver.com", badge:"N"},
  {cat:"etc", title:"Gmail", sub:"ë©”ì¼", href:"https://mail.google.com", badge:"M"},
  {cat:"etc", title:"Calendar", sub:"ìº˜ë¦°ë”", href:"https://calendar.google.com", badge:"C"},
  {cat:"etc", title:"Drive", sub:"ë“œë¼ì´ë¸Œ", href:"https://drive.google.com", badge:"â–³"},
  {cat:"etc", title:"Docs", sub:"ë¬¸ì„œ", href:"https://docs.google.com", badge:"D"},
];

/* =======================
   CATEGORY UI
======================= */
const catsEl = document.getElementById("cats");
const gridEl = document.getElementById("grid");
const favListEl = document.getElementById("favList");
const favScopeEl = document.getElementById("favScope");

let currentCat = "all";

function loadFav(){ try{ return JSON.parse(localStorage.getItem(KEY_FAV)||"{}"); }catch{ return {}; } }
function saveFav(obj){ localStorage.setItem(KEY_FAV, JSON.stringify(obj)); }
function getFavList(cat){ const d=loadFav(); return Array.isArray(d[cat]) ? d[cat] : []; }
function setFavList(cat, list){ const d=loadFav(); d[cat]=list; saveFav(d); }
function isFav(cat, href){ return getFavList(cat).some(x=>x.href===href); }

function counts(){
  const c = {};
  CAT.forEach(x=>c[x.k]=0);
  LINKS.forEach(l=>{
    c["all"]++;
    if(c[l.cat]!==undefined) c[l.cat]++;
  });
  return c;
}

function renderCats(){
  const c = counts();
  catsEl.innerHTML = CAT.map(x=>{
    const active = (x.k===currentCat) ? "active" : "";
    return `<div class="chip ${active}" data-cat="${x.k}">
      ${x.name} <span class="count">(${c[x.k]||0})</span>
    </div>`;
  }).join("");
}

function badgeHTML(item){
  if(item.logo){
    return `<div class="badge"><img src="${item.logo}" alt="logo" loading="lazy"/></div>`;
  }
  const b = (item.badge||"â€¢").toString().slice(0,2);
  return `<div class="badge">${escapeHtml(b)}</div>`;
}

function renderGrid(){
  const list = (currentCat==="all") ? LINKS : LINKS.filter(x=>x.cat===currentCat);
  gridEl.innerHTML = list.map(item=>{
    const on = isFav(currentCat, item.href);
    return `
      <a class="card" href="${item.href}" target="_blank" rel="noopener" data-href="${item.href}">
        ${badgeHTML(item)}
        <div class="meta">
          <div class="title">${escapeHtml(item.title)}</div>
          <div class="sub">${escapeHtml(item.sub||"")}</div>
        </div>
        <div class="star ${on?"on":""}" title="ì¦ê²¨ì°¾ê¸°">${on?"â˜…":"â˜†"}</div>
      </a>
    `;
  }).join("");

  gridEl.querySelectorAll(".card").forEach(card=>{
    const star = card.querySelector(".star");
    star.addEventListener("click",(e)=>{
      e.preventDefault(); e.stopPropagation();
      const href = card.dataset.href;
      const title = card.querySelector(".title").innerText;
      const sub = card.querySelector(".sub").innerText;
      toggleFav({href,title,sub});
    });
  });
}

function renderFav(){
  favScopeEl.textContent = CAT.find(x=>x.k===currentCat)?.name || "ì „ì²´";
  const list = getFavList(currentCat);
  if(list.length===0){
    favListEl.innerHTML = `
      <div class="favItem" style="justify-content:flex-start;">
        <div class="favLeft">
          <div style="font-weight:900;">ë¹„ì–´ìˆìŒ</div>
          <div class="favB">ì¹´ë“œì˜ â­ë¥¼ ëˆŒëŸ¬ ì¶”ê°€</div>
        </div>
      </div>
    `;
    return;
  }
  favListEl.innerHTML = list.map(x=>`
    <div class="favItem">
      <div class="favLeft">
        <a class="favA" href="${x.href}" target="_blank" rel="noopener">${escapeHtml(x.title)}</a>
        <div class="favB">${escapeHtml(x.sub||"")}</div>
      </div>
      <button class="xbtn" data-href="${x.href}" title="ì‚­ì œ">Ã—</button>
    </div>
  `).join("");
  favListEl.querySelectorAll(".xbtn").forEach(b=>{
    b.addEventListener("click", ()=>{
      const href=b.dataset.href;
      setFavList(currentCat, getFavList(currentCat).filter(x=>x.href!==href));
      renderFav(); renderGrid();
    });
  });
}

function toggleFav(item){
  const list = getFavList(currentCat);
  const idx = list.findIndex(x=>x.href===item.href);
  if(idx>=0) list.splice(idx,1);
  else list.unshift(item);
  while(list.length>8) list.pop();
  setFavList(currentCat, list);
  renderFav();
  renderGrid();
}

catsEl.addEventListener("click",(e)=>{
  const chip = e.target.closest(".chip");
  if(!chip) return;
  currentCat = chip.dataset.cat;
  renderCats();
  renderGrid();
  renderFav();
});

/* =======================
   EXPORT / IMPORT / WIPE
======================= */
document.getElementById("exportBtn").addEventListener("click", ()=>{
  const payload = {v:1, exportedAt:new Date().toISOString(), fav: loadFav(), theme: localStorage.getItem(KEY_THEME)||"light"};
  const blob = new Blob([JSON.stringify(payload,null,2)], {type:"application/json"});
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href=url; a.download="dashboard.json";
  document.body.appendChild(a); a.click(); a.remove();
  URL.revokeObjectURL(url);
});

document.getElementById("importBtn").addEventListener("click", ()=>{
  const text = prompt("JSONì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” (ê¸°ì¡´ ê°œì¸í™” ë®ì–´ì“°ê¸°):");
  if(!text) return;
  let obj;
  try{ obj = JSON.parse(text); }catch{ alert("JSON íŒŒì‹± ì‹¤íŒ¨"); return; }
  if(!obj || typeof obj!=="object") return;
  if(obj.fav) localStorage.setItem(KEY_FAV, JSON.stringify(obj.fav));
  if(obj.theme==="dark"||obj.theme==="light") applyTheme(obj.theme);
  renderCats(); renderGrid(); renderFav();
  alert("ì ìš© ì™„ë£Œ");
});

document.getElementById("wipeBtn").addEventListener("click", ()=>{
  if(!confirm("ê°œì¸í™”(ì¦ê²¨ì°¾ê¸°/í…Œë§ˆ)ë¥¼ ì´ˆê¸°í™”í• ê¹Œìš”?")) return;
  localStorage.removeItem(KEY_FAV);
  localStorage.removeItem(KEY_THEME);
  applyTheme("light");
  renderCats(); renderGrid(); renderFav();
});

/* =======================
   TREND (í•œ ì¤„ / 5ì´ˆë§ˆë‹¤ 'ìˆœìœ„ê°€ ë°”ë€œ' ì—°ì¶œ)
======================= */
const trendTextEl = document.getElementById("trendText");

const TREND_POOL = [
  "ì¡°ê¸°/ì¹´í˜", "ìœ íŠœë¸Œë®¤ì§", "ì—‘ì…€", "êµ¬ê¸€ì‹œíŠ¸", "ì›¹íˆ°", "ë„·í”Œë¦­ìŠ¤",
  "íŠ¸ë ˆì´ë”©ë·°", "ë¹„íŠ¸ì½”ì¸", "ì´ë”ë¦¬ì›€", "í™˜ìœ¨", "ê¸ˆë¦¬", "ë¯¸êµ­ CPI",
  "AI ì—ì´ì „íŠ¸", "ë…¸ì…˜ í…œí”Œë¦¿", "í…”ë ˆê·¸ë¨", "ì¹´ì¹´ì˜¤í†¡", "ë¸”ë¼ì¸ë“œ", "ë””ì‹œ"
];

function shuffle(arr){
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}
function renderTrendLine(){
  // ë§¤ë²ˆ ëœë¤ TOP10 -> "ìˆœìœ„ê°€ ë°”ë€ŒëŠ”" ëŠë‚Œ
  const top10 = shuffle(TREND_POOL).slice(0,10);
  const pieces = top10.map((kw, i)=>`<b>${i+1}</b>. ${escapeHtml(kw)}`).join("  Â·  ");
  trendTextEl.innerHTML = pieces;
}
renderTrendLine();
setInterval(renderTrendLine, 5000);

/* trend í´ë¦­ -> ë„¤ì´ë²„ ê²€ìƒ‰ */
trendTextEl.addEventListener("click", (e)=>{
  const text = e.target.textContent || "";
  // ìˆ«ì/ê¸°í˜¸ ì œì™¸í•´ì„œ í‚¤ì›Œë“œ í›„ë³´ ì¶”ì¶œ
  const kw = text.replace(/^\d+\.\s*/,"").trim();
  if(!kw) return;
  window.open("https://search.naver.com/search.naver?query="+encodeURIComponent(kw), "_blank", "noopener");
});

/* =======================
   WEATHER (Open-Meteo)
======================= */
const wxPlace = document.getElementById("wxPlace");
const wxTemp = document.getElementById("wxTemp");
const wxDesc = document.getElementById("wxDesc");
const wxIcon = document.getElementById("wxIcon");

function wxCodeToIcon(code){
  if(code===0) return "â˜€";
  if(code===1||code===2) return "ğŸŒ¤";
  if(code===3) return "â˜";
  if(code===45||code===48) return "ğŸŒ«";
  if([51,53,55,61,63,65,80,81,82].includes(code)) return "ğŸŒ§";
  if([71,73,75].includes(code)) return "ğŸŒ¨";
  if([95,96,99].includes(code)) return "â›ˆ";
  return "â˜";
}
function wxCodeToText(code){
  const map = {
    0:"ë§‘ìŒ",1:"ëŒ€ì²´ë¡œ ë§‘ìŒ",2:"ë¶€ë¶„ì ìœ¼ë¡œ íë¦¼",3:"íë¦¼",
    45:"ì•ˆê°œ",48:"ì„œë¦¬ ì•ˆê°œ",
    51:"ì´ìŠ¬ë¹„(ì•½)",53:"ì´ìŠ¬ë¹„(ì¤‘)",55:"ì´ìŠ¬ë¹„(ê°•)",
    61:"ë¹„(ì•½)",63:"ë¹„(ì¤‘)",65:"ë¹„(ê°•)",
    71:"ëˆˆ(ì•½)",73:"ëˆˆ(ì¤‘)",75:"ëˆˆ(ê°•)",
    80:"ì†Œë‚˜ê¸°(ì•½)",81:"ì†Œë‚˜ê¸°(ì¤‘)",82:"ì†Œë‚˜ê¸°(ê°•)",
    95:"ë‡Œìš°",96:"ë‡Œìš°+ìš°ë°•(ì•½)",99:"ë‡Œìš°+ìš°ë°•(ê°•)"
  };
  return map[code] || "ë‚ ì”¨";
}
async function fetchWeather(lat, lon){
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${encodeURIComponent(lat)}&longitude=${encodeURIComponent(lon)}&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m&timezone=auto`;
  const res = await fetch(url, {cache:"no-store"});
  if(!res.ok) throw new Error("wx fail");
  return res.json();
}
async function reverseGeocode(lat, lon){
  const url = `https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${encodeURIComponent(lat)}&lon=${encodeURIComponent(lon)}`;
  const res = await fetch(url, {headers:{Accept:"application/json"}});
  if(!res.ok) return null;
  const j = await res.json();
  return j?.address?.city || j?.address?.town || j?.address?.village || j?.address?.state || null;
}
async function initWeather(){
  let lat=37.5665, lon=126.9780, place="ì„œìš¸";
  if("geolocation" in navigator){
    try{
      const pos = await new Promise((resolve,reject)=>{
        navigator.geolocation.getCurrentPosition(resolve,reject,{timeout:4000, maximumAge:600000});
      });
      lat = pos.coords.latitude;
      lon = pos.coords.longitude;
      const p = await reverseGeocode(lat, lon);
      place = p || "í˜„ì¬ ìœ„ì¹˜";
    }catch{}
  }
  wxPlace.textContent = place;

  try{
    const data = await fetchWeather(lat, lon);
    const c = data.current;
    wxIcon.textContent = wxCodeToIcon(c.weather_code);
    wxTemp.textContent = `${Math.round(c.temperature_2m)}Â°`;
    wxDesc.textContent =
      `${wxCodeToText(c.weather_code)} Â· ì²´ê° ${Math.round(c.apparent_temperature)}Â° Â· ìŠµë„ ${Math.round(c.relative_humidity_2m)}% Â· ë°”ëŒ ${Math.round(c.wind_speed_10m)}`;
  }catch{
    wxIcon.textContent = "â˜";
    wxTemp.textContent = `--Â°`;
    wxDesc.textContent = "ë‚ ì”¨ ë¡œë“œ ì‹¤íŒ¨";
  }
}

/* =======================
   CALENDAR + CLOCK
======================= */
const clockEl = document.getElementById("clock");
const calTitleEl = document.getElementById("calTitle");
const calGridEl = document.getElementById("calGrid");

function pad2(n){ return String(n).padStart(2,"0"); }
function tickClock(){
  const d=new Date();
  clockEl.textContent = `${pad2(d.getHours())}:${pad2(d.getMinutes())}:${pad2(d.getSeconds())}`;
}
function buildCalendar(){
  const now = new Date();
  const y = now.getFullYear();
  const m = now.getMonth();
  const today = now.getDate();

  calTitleEl.textContent = `ìº˜ë¦°ë” Â· ${y}.${pad2(m+1)}`;

  const week = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];
  calGridEl.innerHTML = week.map(w=>`<div class="calHead">${w}</div>`).join("");

  const first = new Date(y,m,1);
  const last = new Date(y,m+1,0);
  const firstDow = first.getDay();
  const daysInMonth = last.getDate();
  const prevLast = new Date(y,m,0).getDate();

  let dayNum=1;
  for(let i=0;i<42;i++){
    let d, muted=false, isToday=false;
    if(i<firstDow){
      d = prevLast - (firstDow-1-i);
      muted=true;
    }else if(dayNum<=daysInMonth){
      d = dayNum++;
      isToday = (d===today);
    }else{
      d = dayNum - daysInMonth;
      dayNum++;
      muted=true;
    }
    const cls = ["calCell", muted?"muted":"", isToday?"today":""].join(" ").trim();
    calGridEl.insertAdjacentHTML("beforeend", `<div class="${cls}">${d}</div>`);
  }
}

/* =======================
   SAFE HTML
======================= */
function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/* =======================
   INIT
======================= */
renderCats();
renderGrid();
renderFav();
initWeather();
buildCalendar();
tickClock();
setInterval(tickClock, 250);
</script>
</body>
</html>
